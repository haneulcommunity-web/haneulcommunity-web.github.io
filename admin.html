<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-7J5Z798Z4P"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-7J5Z798Z4P');
  </script>
  
  <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - The Steps of Haneul</title>
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/images/HaneulLogo.png">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;400;500&display=swap" rel="stylesheet">
  <!-- Adobe Fonts (optional) -->
  <script>
    (function(d) {
      var config = { kitId: 'wcb3eag', scriptTimeout: 3000, async: true },
      h=d.documentElement,t=setTimeout(function(){ h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive"; },config.scriptTimeout),
      tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;
      h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';
      tk.async=true;tk.onload=tk.onreadystatechange=function(){ a=this.readyState; if(f||a&&a!="complete"&&a!="loaded")return; f=true;clearTimeout(t); try{Typekit.load(config)}catch(e){} };
      s.parentNode.insertBefore(tk,s)
    })(document);
  </script>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    /* ê´€ë¦¬ì í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      padding: 0;
      margin: 0;
    }
    
    #adminPage {
      display: block !important;
    }

    .admin-header {
      background: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 20px;
      margin-bottom: 20px;
    }

    .admin-header h1 {
      margin: 0;
      color: #2c3e50;
      font-size: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .home-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: #3498db;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-size: 14px;
      transition: background 0.3s;
      margin-top: 10px;
    }

    .home-link:hover {
      background: #2980b9;
    }
  </style>
</head>
<body>
  <!-- ê´€ë¦¬ì í—¤ë” -->
  <div class="admin-header">
    <h1>ğŸ” ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
    <a href="index.html" class="home-link">
      <span>ğŸ </span>
      <span>ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</span>
    </a>
  </div>

  <!-- ê´€ë¦¬ì í˜ì´ì§€ -->
  <div id="adminPage" class="page">
    <div class="admin-container">

      <!-- íƒ­ ë©”ë‰´ -->
      <div class="admin-tabs">
        <button class="admin-tab active" onclick="switchAdminTab('employees')">ì•„ë°”íƒ€ ê´€ë¦¬</button>
        <button class="admin-tab" onclick="switchAdminTab('comments')">ëŒ“ê¸€ ê´€ë¦¬</button>
      </div>

      <!-- ì•„ë°”íƒ€ ê´€ë¦¬ íƒ­ -->
      <div id="employeesTab" class="admin-tab-content active">
        <!-- ê²€ìƒ‰ ë° í†µê³„ -->
        <div class="admin-search-section">
          <div class="admin-stats">
            <div class="stat-card">
              <div class="stat-number" id="totalCount">0</div>
              <div class="stat-label">ì „ì²´ ë°ì´í„°</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="filteredCount">0</div>
              <div class="stat-label">ê²€ìƒ‰ ê²°ê³¼</div>
            </div>
          </div>
          
          <div class="admin-search-bar">
            <input type="text" id="adminSearchName" placeholder="ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰í•˜ê¸°">
            <input type="text" id="adminSearchTeam" placeholder="íŒ€ëª…ìœ¼ë¡œ ê²€ìƒ‰í•˜ê¸°">
            <button class="btn-primary" onclick="adminSearch()">ê²€ìƒ‰</button>
            <button class="btn-secondary" onclick="adminLoadAll()">ì „ì²´ ë³´ê¸°</button>
          </div>
        </div>

        <!-- ë°ì´í„° í…Œì´ë¸” -->
        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>ì•„ë°”íƒ€</th>
                <th>ì´ë¦„</th>
                <th>íŒ€ëª…</th>
                <th>ë§ì”€</th>
                <th>ìƒì„±ì¼</th>
                <th>ê´€ë¦¬</th>
              </tr>
            </thead>
            <tbody id="adminTableBody">
              <!-- ë°ì´í„°ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </tbody>
          </table>
        </div>

        <div id="adminStatus" class="status-message"></div>
      </div>

      <!-- ëŒ“ê¸€ ê´€ë¦¬ íƒ­ -->
      <div id="commentsTab" class="admin-tab-content">
        <!-- ê²€ìƒ‰ ë° í†µê³„ -->
        <div class="admin-search-section">
          <div class="admin-stats">
            <div class="stat-card">
              <div class="stat-number" id="totalCommentCount">0</div>
              <div class="stat-label">ì „ì²´ ëŒ“ê¸€</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="filteredCommentCount">0</div>
              <div class="stat-label">ê²€ìƒ‰ ê²°ê³¼</div>
            </div>
          </div>
          
          <div class="admin-search-bar">
            <input type="text" id="commentSearchName" placeholder="ì•„ë°”íƒ€ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰">
            <input type="text" id="commentSearchAuthor" placeholder="ëŒ“ê¸€ ì‘ì„±ìë¡œ ê²€ìƒ‰">
            <button class="btn-primary" onclick="adminSearchComments()">ê²€ìƒ‰</button>
            <button class="btn-secondary" onclick="adminLoadAllComments()">ì „ì²´ ë³´ê¸°</button>
          </div>
        </div>

        <!-- ëŒ“ê¸€ í…Œì´ë¸” -->
        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>ì•„ë°”íƒ€</th>
                <th>ì‘ì„±ì</th>
                <th>ë©”ì‹œì§€</th>
                <th>ì‘ì„±ì¼</th>
                <th>ê´€ë¦¬</th>
              </tr>
            </thead>
            <tbody id="adminCommentTableBody">
              <!-- ëŒ“ê¸€ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </tbody>
          </table>
        </div>

        <div id="commentAdminStatus" class="status-message"></div>
      </div>
    </div>
  </div>

  <!-- Edit Modal (í•„ìš”í•œ ê²½ìš°) -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeEditModal()">âœ•</button>
      <h3>ì•„ë°”íƒ€ ìˆ˜ì •</h3>
      <form id="editForm" onsubmit="updateEmployee(event)">
        <input type="hidden" id="editId">
        
        <div class="form-group">
          <label for="editName">ì´ë¦„</label>
          <input type="text" id="editName" required>
        </div>
        
        <div class="form-group">
          <label for="editTeam">íŒ€ëª…</label>
          <input type="text" id="editTeam" required>
        </div>
        
        <div class="form-group">
          <label for="editVerse">ë§ì”€</label>
          <textarea id="editVerse" rows="4" required></textarea>
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn-primary">ì €ì¥</button>
          <button type="button" class="btn-secondary" onclick="closeEditModal()">ì·¨ì†Œ</button>
        </div>
      </form>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="js/data.js"></script>
  
  <!-- Avatar System -->
  <script src="js/assets.js"></script>
  <script src="js/avatar-builder.js"></script>
  
  <!-- Firebase App (ëª¨ë“ˆë¡œ ë¡œë“œ) -->
  <script type="module" src="js/app.js"></script>

  <!-- ê´€ë¦¬ì í˜ì´ì§€ ì´ˆê¸°í™” -->
  <script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ê´€ë¦¬ì ê¸°ëŠ¥ ì´ˆê¸°í™”
    window.addEventListener('load', function() {
      // app.jsê°€ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
      const checkAdmin = setInterval(function() {
        if (typeof adminLoadAll === 'function') {
          clearInterval(checkAdmin);
          // ê´€ë¦¬ì ë°ì´í„° ë¡œë“œ
          adminLoadAll();
          console.log('Admin page initialized');
        }
      }, 100);
    });
  </script>
</body>
</html>

